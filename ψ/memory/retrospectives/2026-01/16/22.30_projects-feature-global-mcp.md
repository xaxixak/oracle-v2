# Session Retrospective

**Date**: 2026-01-16
**Time**: ~22:30 GMT+7
**Duration**: ~90 minutes
**Focus**: Projects feature + Global MCP setup

## Summary

Added project categorization system with colors to Oracle v2. Implemented full stack: database schema, MCP tools, HTTP API endpoints, and React frontend. Also configured global MCP settings so Oracle can be used from any project folder.

## What We Built

### Backend (MCP + HTTP)
- **Projects table** in schema (`src/db/schema.ts`) - id, name, color, description, ghqPath
- **MCP tools**: `oracle_projects_list`, `oracle_projects_create`, `oracle_projects_update`
- **Updated `oracle_learn`** - added `project` parameter
- **Updated `oracle_search`** - added `project` filter
- **HTTP API endpoints** (`src/server.ts`):
  - `GET /api/projects`
  - `POST /api/projects`
  - `PUT /api/projects/:id`
  - `DELETE /api/projects/:id`

### Frontend
- **Projects page** (`frontend/src/pages/Projects.tsx`)
- **Projects CSS** (`frontend/src/pages/Projects.module.css`)
- Color picker with 10 predefined colors + custom color input
- CRUD operations for project management
- Added to Header navigation under "Tools"

### Global Configuration
- Updated `~/.claude/settings.local.json` with Oracle MCP server config
- Oracle tools now accessible from any project folder

## Files Changed
- `src/db/schema.ts` - Added projects table
- `src/index.ts` - Added project tools + updated learn/search
- `src/server.ts` - Added projects API endpoints
- `frontend/src/App.tsx` - Added Projects route
- `frontend/src/components/Header.tsx` - Added Projects to Tools menu
- `frontend/src/pages/Projects.tsx` - New file
- `frontend/src/pages/Projects.module.css` - New file
- `C:\Users\xaxix\.claude\settings.local.json` - Global MCP config

## AI Diary (Required)

This session was educational for me. The user asked good questions that made me realize I had been assuming too much. When they asked "is the app running on local 3000?" I jumped to checking ports, but the real issue was understanding the development workflow.

I made a mistake early on - I said "project field already exists in schema" after finding it, but I should have studied the schema thoroughly BEFORE starting work. The user rightfully called me out on this. I learned that I need to do more comprehensive research upfront rather than discovering things as I go.

The most interesting part was explaining the value proposition of Oracle. The user asked a great question: "AI มีประมวลผลอยู่แล้ว มันจะเสริมยังไง" - this forced me to articulate why a persistent, searchable external memory adds value beyond AI's built-in capabilities. The key insight: Oracle provides cross-session, cross-project memory that AI alone cannot offer.

Setting up global MCP config was straightforward but important. The user wanted to use Oracle from other projects, which is the whole point of a centralized knowledge system.

One frustration was the port conflict issue after Windows restart. The old process (PID 26820) showed as listening but couldn't be killed. This is a Windows TCP TIME_WAIT issue that required waiting or manual restart.

## Lessons Learned

- **Pattern**: Study the full schema/codebase BEFORE starting implementation work
- **Pattern**: The variable name matters - `db` not `sqlite` in server.ts (caused runtime error)
- **Anti-pattern**: Assuming partial knowledge is sufficient for implementation

## Technical Notes

- Projects table uses hex color codes (#a78bfa format)
- `project` field exists throughout the schema (documents, logs, traces, decisions)
- Global MCP config location: `~/.claude/settings.local.json`

## Next Steps

- [ ] Test Projects page in browser (need to restart servers)
- [ ] Consider auto-detecting project from cwd when using Oracle from other folders
- [ ] Add project colors to search results display
- [ ] Consider adding project filter to Feed and other pages
